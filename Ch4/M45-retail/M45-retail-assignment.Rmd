---
title: "M45-retail-import"
author: "LS"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
## source("../../LSR.R")
library(dplyr)
library(tidyr)
library(ggplot2)
```

## 0. 시작하기    

+ 데이터를 받았을 때에 가장 처음에 해야할 작업은 데이터가 어떻게 구성이 되어있는지를 확인하는 것입니다.  이렇게 파일로 받은 경우에는 엑셀이나 메모장으로 데이터 파일을 열어 확인합니다.  
+ **Tidy data**란 각 column이 변수에 해당하고 각 row가 1개의 관찰을 의미하는 잘 정리된 데이터 구조를 이야기 합니다.  이는 R자료 구조에서는 `data.frame`에 해당하고 파이썬에서는 `pandas.DataFrame`에 해당합니다.  시계열 자료인 경우에는 각각 `xts`이거나 `pandas.Series`입니다.  
+ Tidy data가 아닌 경우에는 주어진 데이터를 우선 tidy data를 만들어야 하며, 이를 전처리(Preprocessing)과정이라고 합니다.  실제 업무에서 접하게 되는 데이터는 `tidy`한 경우가 잘 없습니다.  그렇기 때문에 데이터를 `tidy`하게 바꾸는 preprocessing과정이 전체 데이터 분석의 시간의 상당수를 차지하는 경우가 많습니다.  
+ Preprocessing을 하는 과정은 다양하고 복잡하고 지저분한 raw 데이터 만큼이나 다양하고 복잡하고 세밀한 관찰력과 때로는 창의력을 요하기도 합니다.  이 과정이 흔히 노동집약적이기도 하지만, 이 과정이 데이터를 보는 눈과 데이터 구조를 이해하는 데에 큰 도움을 주기도 합니다.  또한 preprocessing과정을 열심히 수행하면서 얻게되는 경험과 프로그래밍 실력은 데이터 분석가로서의 자신감을 높여줍니다.  
+ `M51`에서는 Preprocessing과정에서 1) tidy하지 않은 데이터를 tidy하게 바꾸는 명령어와 2) 두 개 이상의 데이터 프레임을 합치는 법을 배웁니다.   1)에서는 `tidyr` 패키지의 몇 가지 명령을 사용해서 `tidy`하지 않은 데이터 셋 중에서 전형적인 경우에 대처하는 법을 배웁니다.  2) 실제 데이터 분석을 하는 경우에 상당수는 1가지 데이터가 아닌 2개 이상의 데이터를 합치는 경우가 많습니다.  예를 들어 날씨에 따른 매출의 변화를 관찰하고 싶다면 기상청에서 제공하는 날씨데이터를 구해서 매출 데이터랑 결합을 시켜야 할 것입니다.    

![](fig/fig1.png)\  

+ 다행히도 현재 사용할 데이터는 `tidy`한 데이터입니다.  `tidy`하지 않은 데이터를 처리한 예제는 `M44[0]-Preprocessing.Rmd`에서 찾을 수 있습니다.  `M44[0]-Preprocessing.Rmd`에서는 흔한 raw 데이터를 불러와서 변수의 이름을 붙이고 `tidyr`패키지의 명령을 이용해서 `tidy`한 dataset으로 만들어내서 csv파일로 저장하는 프로세스를 보여줍니다.  **네모난** **tidy한** dataset이 되었기에 `M44[1]`이후에는 각종 데이터 분석을 할 수 있습니다.  
+ 아래 명령을 통해 데이터를 불러옵니다.  

```{r}
library(readxl)
dataset <- read_excel("retail.xlsx")
```

+ 데이터 구조를 파악합니다.  

```{r}
str(dataset)
head(dataset)
dim(dataset)
```

+ 데이터 분석은 대체로 1) 데이터의 관찰 -> 2) 가설의 설정 -> 3) 가설 검증 -> 4) 결론 도출 -> 5) 공유의 과정으로 이루어집니다.  이 과정에서 때로는 다른 데이터를 더 확보해서 분석에 포함시키기도 하고, 데이터의 결함과 미비한 점을 파악함으로써 데이터 관리자와 공급자와 커뮤니케이션 합니다.  마지막으로 공유의 단계에서는 데이터와 관련된 다른 사람들과 의사소통 하며 더 나은 의사결정을 돕게합니다.   
+ retail 데이터 셋을 관찰한 결과 아래처럼 9개의 가설을 세웠습니다.  이를 차례로 검증해 보겠습니다.  

## 1. `Ship Date`를 기반으로 배송이 가장 오래걸리는 상품은 무엇인가?    

## 2. 마진이 가장 많이 남는 상품은 무엇인가?  



